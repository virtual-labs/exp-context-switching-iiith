<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="./JS/main.js"></script>
</head>

<body>
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content" style="border-radius: 15px;">
            <!-- <span class="close">&times;</span> -->
            <p>
            <h1 style="color: red;">Bootstrap the OS</h1>
            <p>
                Bootstrapping the operating system (OS) is the process of initializing a computer's hardware and
                software components to bring the OS into a running state. This process begins when the computer is
                powered on or restarted.

            <h4>Bootstrap first so that we have all our resources initialized.</h4>
            <span class="boot"
                style="width: fit-content; padding: 10px; background-color: dodgerblue; color: white; border-radius:10px;">Bootstrap</span>
            </p>
            </p>
        </div>

    </div>

    <div id="myModal_timer" class="modal_timer">

        <!-- Modal content -->
        <div class="modal-content-t" style="border-radius: 15px;">
            <!-- <span class="close">&times;</span> -->
            <p>
            <h1 style="color: red;">Timer Interrupt</h1>
            <p>

            <h4>You have encountered a timer interrupt.</h4>
            <span class="boot-t"
                style="width: fit-content; padding: 10px; background-color: dodgerblue; color: white; border-radius:10px;">OK</span>
            </p>
            </p>
        </div>

    </div>

    <div id="myModal_read" class="modal_read">

        <!-- Modal content -->
        <div class="modal-content-r" style="border-radius: 15px;">
            <!-- <span class="close">&times;</span> -->
            <p>
            <h1 style="color: red;">Read Interrupt</h1>
            <p>

            <h4>You have encountered a read interrupt.</h4>
            <span class="boot-r"
                style="width: fit-content; padding: 10px; background-color: dodgerblue; color: white; border-radius:10px;">OK</span>
            </p>
            </p>
        </div>

    </div>

    <div id="myModal_exit1" class="modal_exit1">

        <!-- Modal content -->
        <div class="modal-content-ex1" style="border-radius: 15px;">
            <!-- <span class="close">&times;</span> -->
            <p>
            <h1 style="color: red;">Exit Interrupt</h1>
            <p>

            <h4>You have encountered an exit interrupt.</h4>
            <span class="boot-ex1"
                style="width: fit-content; padding: 10px; background-color: dodgerblue; color: white; border-radius:10px;">OK</span>
            </p>
            </p>
        </div>

    </div>

    <div id="myModal_exit2" class="modal_exit2">

        <!-- Modal content -->
        <div class="modal-content-ex2" style="border-radius: 15px;">
            <!-- <span class="close">&times;</span> -->
            <p>
            <h1 style="color: red;">Exit Interrupt</h1>
            <p>

            <h4>You have encountered an exit interrupt.</h4>
            <span class="boot-ex2"
                style="width: fit-content; padding: 10px; background-color: dodgerblue; color: white; border-radius:10px;">OK</span>
            </p>
            </p>
        </div>

    </div>

    <div class="simulation_page">
        <div class="container">
            <div id="dialogue_box">
                <p id="dialogue" style="position: sticky;">Dialog Box</p>
                <div id="remarkDiv" style="height:125px; overflow-y: scroll; position: sticky">
                    <p id="remark"
                        style="padding: 10px; padding-top: 2px; padding-bottom: 2px; width:90%; margin: 10px;">
                        > Click on the start button and wait for the OS to boot up.
                    </p>
                </div>
            </div>
            <div id="st-box">
                <p id="umode" class="wrapper">USER
                    <i style="cursor: pointer;" class="fa fa-info-circle"></i>
                    <span class="tooltip">
                        User Mode is a privilege level in OS where programs and applications run within restricted
                        access to computer's hardware and system resources.
                    </span>
                </p>
                <div id="load_process_A" style="overflow-y: scroll; height:313px">
                    <table id="process" style="padding: 10px; width:90%; margin: 10px;"></table>
                </div>
                <div id="process_buttons">
                    <button id="prev_process" onclick="process_previous()">Previous</button>
                    <button id="next_process" onclick="process_next()">Next</button>
                </div>
            </div>

            <div id="nd-box">
                <p id="hardware" class="wrapper">HARDWARE
                    <i style="cursor: pointer;" class="fa fa-info-circle"></i>
                    <span class="tooltip">Hardware provides the foundation on which the OS operates. It offers the
                        computational power, memory, storage, and I/O capabilities that the OS and applications depend
                        on. The OS, in turn, manages and interacts with this hardware to provide a stable and productive
                        computing environment.</span>
                </p>
                <div id="interrupt_section" style="height:313px">
                    <table id="interrupt" style="padding: 10px; width:90%; margin: 10px;"></table>
                </div>
                <div id="process_buttons">
                    <button id="prev_process" onclick="back_to_user_mode()">Previous</button>
                </div>
            </div>

            <div id="rd-box">
                <p id="kmode" class="wrapper">KERNEL
                    <i class="fa fa-info-circle"></i>
                    <span class="tooltip">Kernel mode, also known as supervisor mode or privileged mode, is the highest
                        privilege level in an operating system. In kernel mode, software has unrestricted access to
                        hardware. This includes tasks like memory management, process scheduling, device driver
                        operation, and handling hardware interrupts.
                    </span>
                </p>
                <div id="k-container" style="overflow-y: scroll; height:313px;">
                    <table id="kernel" style="padding: 10px; width:90%; margin: 10px;"></table>
                </div>
                <div id="kernel_buttons">
                    <button id="kernelCode_execute" onclick="execute()">Execute</button>
                </div>
            </div>
        </div>

        <div class="conatiner2">
            <div id="cpu">
                <p id="mycpu" class="wrapper">CPU
                    <i class="fa fa-info-circle"></i>
                    <span class="tooltip">CPU is the hardware component that carries out the essential computational
                        tasks required by the OS and software applications. The OS manages and coordinates the CPU's
                        activities, ensuring that processes run efficiently, securely, and in accordance with system
                        priorities.</span>
                </p>
                <div class="overlay"></div>
                <div class="cpu_details" style="z-index: 2;">
                    <table id="cpu_section"></table>
                </div>
            </div>
            <div id="k-stack_A">
                <p id="k-stack-A" class="wrapper">k-stack: process A
                    <i class="fa fa-info-circle"></i>
                    <span class="tooltip">The kernel stack contains data related to the execution of kernel-level
                        functions and system calls. It includes information such as return addresses, function
                        parameters, and local variables of kernel functions. This particular K-Stack belongs to process
                        A.</span>
                </p>
                <table id="kStack_A_Table"></table>
            </div>
            <div id="k-stack_B">
                <p id="k-stack-B" class="wrapper">k-stack: process B
                    <i class="fa fa-info-circle"></i>
                    <span class="tooltip">The kernel stack contains data related to the execution of kernel-level
                        functions and system calls. It includes information such as return addresses, function
                        parameters, and local variables of kernel functions. This particular K-Stack belongs to process
                        B.</span>
                </p>
                <table id="kStack_B_Table"></table>
            </div>
            <div id="pcbA">
                <p id="pcb_A_p" class="wrapper">PCB: process A
                    <i class="fa fa-info-circle"></i>
                    <span class="tooltip">PCB serves as a central repository of process-specific information required
                        for process management and scheduling. The PCB contains a wide range of information about a
                        process or thread, including its program counter (PC), CPU registers, process state, process ID,
                        scheduling information, memory management data, and I/O status. This PCB belongs to process
                        A.</span>
                </p>
                <table id="pcb_A_table"></table>
            </div>
            <div id="pcbB">
                <p id="pcb_B_p" class="wrapper">PCB: process B
                    <i class="fa fa-info-circle"></i>
                    <span class="tooltip">PCB serves as a central repository of process-specific information required
                        for process management and scheduling. The PCB contains a wide range of information about a
                        process or thread, including its program counter (PC), CPU registers, process state, process ID,
                        scheduling information, memory management data, and I/O status. This PCB belongs to process
                        B.</span>
                </p>
                <table id="pcb_B_table"></table>
            </div>
        </div>

        <div class="container3">
            <h2>Know what's happening</h2>
            <section class="accordion">
                <input type="checkbox" name="collapse2" id="handle1" checked="checked">
                <h2 class="handle">
                    <label for="handle1">Introduction</label>
                </h2>
                <div class="content">
                    <p><strong>Objective:</strong> <br>
                        Our objective in this experiment is to understand the mechanism of context switching used by
                        the OS for multi processing.
                        In this simulation, we approach the context switching technique at a three level abstraction (User, Hardware and Kernel).
                    
                </p>
                <p>
                    <p><strong>Intuition:</strong><br>You are to observe the instruction given in the dialog box and respond with the corresponding
                        action in the simulation above.</p>
                    <p>Observe the control flow between the user state, hardware and the kernel mode and how the CPU
                        and other resources get's updated accordingly.</p>
                </p>
                    <p><strong>Apparatus:</strong> <br>
                            1. User<br>
                            2. Hardware<br>
                            3. Kernel<br>
                            4. CPU<br>
                            5. Kernel Stack (k-stack)<br>
                            6. Process Control Block (PCB)<br>
                            7. Interrupt Handlers<br>
                    </p>
                </div>
            </section>
            <section class="accordion">
                <input type="checkbox" name="collapse2" id="handle2">
                <h2 class="handle">
                    <label for="handle2">Theory</label>
                </h2>
                <div class="content">
                    <p><strong>What is context?</strong><br> The term "context" refers to the state
                        and information associated with a process or thread at a specific point in time. It
                        encompasses various aspects of the process's execution environment, including its program
                        counter, register values, memory allocation, and other relevant data. It provides
                        all the necessary information for the operating system to save and later restore the
                        process's execution when it is preempted or needs to be resumed.</p>
                    <p><strong>How is context different from PCB?:</strong> <br>
                        While context and PCB both deal with process management and are closely related, they serve
                        different purposes and exist at different levels of abstraction.
                        Context is about saving and restoring the immediate execution state of a process or thread
                        during context switches, while the PCB is a data structure used to maintain comprehensive
                        information about a process or thread over its entire lifetime and is used for higher-level
                        process management within the operating system.</p>
                </div>
            </section>
            <section class="accordion">
                <input type="checkbox" name="collapse2" id="handle3">
                <h2 class="handle">
                    <label for="handle3">Programs used</label>
                </h2>
                <div class="content">
                    <p><strong>Program A: Simple addition program</strong>
<pre>
<code>
#include <stdio.h>
int main()
{
    int a, b, c;
    a = 5;
    b = 10;
    c = a + b;
    return c;
}
</code>
</pre></p>
                    <p><strong>Program B: Read and add program</strong>
<pre>
<code>
#include <stdio.h>
int main()
{
    int a, b, c;
    a = 15;
    scanf("%d", &b); 
    c = a + b;
    return c;
}
</code>
</pre>
                    </p>
                </div>
            </section>

            <section class="accordion">
                <input type="checkbox" name="collapse2" id="handle4">
                <h2 class="handle">
                    <label for="handle4">Context switching in linux OS</label>
                </h2>
                <div class="content">
                    <p>
                        Here are few commands that will help you understand the context switching in linux OS.
                        <pre>
<code>
$ grep ctxt /proc/$pid/status
</code>
</pre>
The above command will give you the number of context switches that have happened for the process with the given pid. You can get the pid of a process using the following command.
<pre>
<code>
$ htop
</code></pre>
Another good way to inspect a process on your system is using the <code>vmstat</code> command. This will give you a detailed overview of the number of context switches, number of interrupts, and further information like the cache used etc.
                        
                    </p>
                </div>
            </section>


            <section class="accordion">
                <input type="checkbox" name="collapse2" id="handle5">
                <h2 class="handle">
                    <label for="handle5">References</label>
                </h2>
                <div class="content">
                    <a href="https://docs.kernel.org/" target="_blank">Linux documentation</a><br>
                    <a href="https://en.wikipedia.org/wiki/Context_switch" target="_blank">Wikipedia</a><br>
                    <a href="https://pages.cs.wisc.edu/~remzi/OSTEP/" target="_blank">Remzi-threeEasyPieces</a><br>
                    <a href="https://drive.uqu.edu.sa/_/mskhayat/files/MySubjects/2017SS%20Operating%20Systems/Abraham%20Silberschatz-Operating%20System%20Concepts%20(9th,2012_12).pdf"
                        target="_blank">OS
                        by Silberschatz</a><br>
                    <a href="https://github.com/torvalds/linux" target="_blank">Linux github Repo</a>
                </div>
            </section>


        </div>

    </div>
    <div class="control_page">
        <div style="padding: 10px">
            <h2 style="font-weight: bolder;"> Student controls </h2>
            <p id="current_running_process"> Current Running program: -- </p>
            <div id="instruction_box">
                <p
                    style="margin-top: auto; margin-bottom: 0px; font-weight: bold; background-color: black; color: white; padding: 10px; text-align: center;">
                    Instruction Box</p>
                <div id="instructions" style="overflow-y: scroll; height:150px">
                    <table id="i" style="overflow-y: scroll; padding-left: 10px; width:90%; margin: 10px;"></table>
                </div>
            </div>

            <div id="ints">
                <table style="padding: 10px; width:90%; margin: 10px;">
                    <tr>
                        <td>I/O completed</td>
                        <td> <button onclick="trigger_io()">Trigger</button> </td>
                    </tr>
                </table>
            </div>

            <div style="margin-top: 10px;">
                <p id="myTrapHandlers" style="font-weight: bold;">Interrupt Handlers:</p>
                <p id="interrupt_type"> Interrupt type: -- </p>
                <table id="handlers"></table>
            </div>
            <button id="start_simulation" onclick="start()">Start</button>

            <div id="observations" style="margin-top: 10px;">
                <p
                    style="margin-top: auto; margin-bottom: 0px; font-weight: bold; background-color: black; color: white; padding: 10px; text-align: center;">
                    Observations</p>
                <table style="padding: 10px;">
                    <tr>
                        <td>Number of context switches</td>
                        <td id="context_switches">0</td>
                    </tr>
                    <tr>
                        <td>Number of interrupts</td>
                        <td id="interrupts">0</td>
                    </tr>
                    <tr>
                        <td>Wrong instruction selection</td>
                        <td id="wrong_ints_selection">0</td>
                    </tr>

                </table>
            </div>

        </div>
    </div>


</body>

</html>
